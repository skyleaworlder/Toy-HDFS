# Toy-HDFS

## 目标

实现一个简单的 `HDFS`。

## 架构

* 主从结构模式
  * 名称节点 / 中心服务器
  * 数据节点（单节点单进程）
* 客户端接口

可通过 **数据节点** 配置 **名称节点** 后，运行简单的 `demo`。

## 功能

* 名称节点
  * 心跳信息接收
  * 元数据管理（如 FS(数据块信息、状态)、DNS(数据节点地址)）
  * 客户端请求接收 | 根据 **文件名** 处理 | 根据 **数据块** 信息找到数据节点地址 | 返回
* 数据节点
  * 客户端请求接收
  * ACK 信号接收 / 发送
  * 心跳信息发送
* 客户端
  * 用户接口
    * 打开文件
    * 读写文件
  * 私有方法
    * 文件分块

## 可供实现的方式

`golang` 的 `go` 算是内置的特性，这个特性可以帮助我快速起多个纤程。
一个纤程用来 `listen` 当前的 `Buffer.Offset`，如果到了 7，就直接输出到 `Packet` 里面。
`Packet` 用另一个纤程 `listen`，如果看到 `Packet` 也满了，就把 `Packet` 输出到 `PacketQueue` 里面去。

在这个过程中，每次都读入一个 `Chunk` 的大小给 `Buffer`，这里我觉得可以优化一下，`Buffer` 的类型不是 `[]byte`，直接用 `[]Chunk` 当类型。
